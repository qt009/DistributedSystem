<!DOCTYPE html>
<html lang="en">
<head>
  <title>Bank Browser</title>
  <script type="text/javascript">

    const net = require('net');
    let ws = new net.Socket();
    console.log('Attempting WebSocket connection...');
    ws.onopen = function () {
      console.log('WebSocket connection opened.');
    };
    ws.onmessage = function (event) {
      console.log('Received message from WebSocket:', event.data);
    };
    ws.onclose = function () {
      console.log('WebSocket connection closed.');
    };

    function sendMessage() {
      const input = document.getElementById('messageInput').value;
      ws.send(input);
    }

    function connectBank() {
      // const ip = document.getElementById('BankIPInput').value;
      // const port = document.getElementById('BankPortInput').value;
      const ip = "172.20.2.1";
      const port = 5000;
      ws = new WebSocket("ws://" + ip + ":" + port)
      ws.send("connectBank " + ip + " " + port);
    }
  </script>
</head>
<body>
<h1>Bank Browser</h1>


<form action="http://172.20.2.1:8002/connectToBank" method=POST>
  <label for="BankIPInput"></label><input type="text" id="BankIPInput" name = "bankIP" placeholder="Enter bank IP">
  <label for="BankPortInput"></label><input type="text" id="BankPortInput" name = "bankPort" placeholder="Enter bank port">
  <button type="submit">connect</button>
</form>
<br>

<label for="messageInput"></label><input type="text" id="messageInput" placeholder="Enter a message">
<button onclick="sendMessage()">Send</button>
<br>

<h1>Total Value of Bank</h1>
<label for="totalValue"></label><p id="totalValue"></p>
<button onclick="totalValueRequest()">Total Value</button>
<br>

<h1>Submit Change</h1>
<label for="changeTotalValue"></label>
<input type="number" id="changeTotalValue" placeholder="0.0">
<button onclick="moneyAdd()">Add</button>
<button onclick="moneySubtract()">Subtract</button>

</body>
</html>